function accuracy = test(net)
% This function tests the accuracy of a given neural network,
% based on the MNIST dataset.

load_dataset;

prob = predict(net, test_data);
prob = reshape(prob, test_batchsize, 10);
[~, prediction] = max(prob, [], 2);
prediction = prediction - 1;
YTest_double = double(test_target);
equalElements = prediction == YTest_double;
numEqualElements = sum(equalElements);
totalElements = numel(YTest_double);

disp(prob(1:10, :))
disp(prediction(1:10))
disp(YTest_double(1:10))

% Calculate the accuracy
accuracy = (numEqualElements / totalElements);
disp(['Test Accuracy: ', num2str(accuracy * 100), '%']);
end